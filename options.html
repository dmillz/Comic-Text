<html>
<head>
	<title>Comic Text Extension: Options</title>
	<script type="text/javascript" src="jquery-1.6.2.min.js"></script>
	<script type="text/javascript" src="config.js"></script>
	<script type="text/javascript" src="options.js"></script>
</head>
<body onload="load()">

	<style type="text/css">
		body { font-family: sans-serif; font-size: 14px; background-color: #ececec; }
		h2 { font-size: 1.4em; margin-bottom: 0;}	
		h3 { margin: 0; }
	</style>

	<h1>Comic Text: Options</h1>
	<hr/>
	
	<label for="whitelist"><h2>Enable Comic Text for these domains</h2><h3>(one per line, or enter * for all sites)</h3></label>
	<textarea id="whitelist" rows="10" cols="50"></textarea>
	<div style="margin-bottom: 20px;">
		<input type="button" value="Save" class="save" />
	</div>
	
	<h2>Process the following HTML elements</h2></label>
	<input type="radio" value="img" name="tags" id="chkAll"><label for="chkAll">Only process &lt;img&gt; tags (default)</label><br/>
	<input type="radio" value="all" name="tags" id="chkImg"><label for="chkImg">Process ALL html tags</label>
	<div style="margin-bottom: 20px;">
		<input type="button" value="Save" class="save" />
	</div>
	
	<label for="whitelist"><h2>Popup CSS</h2></label>
	<textarea id="css" rows="20" cols="90"></textarea><br/>
	<input type="button" style="clear:left;" value="Reset to default CSS" onclick="resetCss()" />
	
	<div style="margin-top: 20px;">
		<input type="button" value="Save" class="save" />
	</div>

	<script type="text/javascript">

		$(".save").click(function(e) {
			save(e);
		});
	
		function save(e) {
			options.saveWhitelist($("#whitelist").val());
			options.saveCss($("#css").val());
			options.saveTags($("input:radio[name=tags]:checked").val());
			
			// show a success msg
			var $success = $("<span/>")
								.css("color", "green")
								.css("font-weight", "bold")
								.html("All settings have been saved.")
								.insertAfter($(e.target));
			
			setTimeout(function() {
				$success.fadeOut(1000);
			}, 1000);			
		}
		
		function load() {
			$("#whitelist").val(options.loadWhitelist());			
			$("#css").val(options.loadCss());
			$("input[name='tags']")
				.filter("[value=" + options.loadTags() + "]")
				.attr("checked", "checked");
		}
		
		function resetCss() {
			options.resetCss();
			load();
		}

</script>

</body>
</html>